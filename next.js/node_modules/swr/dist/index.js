Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("dequal/lite");function n(e,r,n,t){return new(n||(n=Promise))(function(u,i){function a(e){try{c(t.next(e))}catch(e){i(e)}}function o(e){try{c(t.throw(e))}catch(e){i(e)}}function c(e){var r;e.done?u(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(a,o)}c((t=t.apply(e,r||[])).next())})}function t(e,r){var n,t,u,i,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,t&&(u=2&i[0]?t.return:i[0]?t.throw||((u=t.return)&&u.call(t),0):t.next)&&!(u=u.call(t,i[1])).done)return u;switch(t=0,u&&(i=[2&i[0],u.value]),i[0]){case 0:case 1:u=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(u=a.trys,(u=u.length>0&&u[u.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!u||i[1]>u[0]&&i[1]<u[3])){a.label=i[1];break}if(6===i[0]&&a.label<u[1]){a.label=u[1],u=i;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(i);break}u[2]&&a.ops.pop(),a.trys.pop();continue}i=r.call(e,a)}catch(e){i=[6,e],t=0}finally{n=u=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}var u={}[0],i=function(e){return e===u},a=function(e){return"function"==typeof e},o=function(){},c=function(e,r){return Object.assign({},e,r)},s=!0,f="undefined"!=typeof window,l="undefined"!=typeof document,d=f&&window.addEventListener?window.addEventListener:o,v=l?document.addEventListener:o,g={isOnline:function(){return s},isVisible:function(){var e=l&&document.visibilityState;return!!i(e)||"hidden"!==e}},h={initFocus:function(e){v("visibilitychange",e),d("focus",e)},initReconnect:function(e){d("online",function(){s=!0,e()}),d("offline",function(){s=!1})}},p="undefined"==typeof window||"Deno"in window,b=p?null:window.requestAnimationFrame,y=b?function(e){return b(e)}:function(e){return setTimeout(e,1)},w=p?e.useEffect:e.useLayoutEffect,m="undefined"!=typeof navigator&&navigator.connection,R=!p&&m&&(["slow-2g","2g"].includes(m.effectiveType)||m.saveData),x=new WeakMap,O=0;function V(e){if(a(e))try{e=e()}catch(r){e=""}var r;return Array.isArray(e)?(r=e,e=function(e){if(!e.length)return"";for(var r="arg",n=0;n<e.length;++n){var t=e[n],i=u;null===t||"object"!=typeof t&&!a(t)?i=JSON.stringify(t):x.has(t)?i=x.get(t):(i=O,x.set(t,O++)),r+="$"+i}return r}(e)):r=[e=String(e||"")],[e,r,e?"$err$"+e:"",e?"$req$"+e:""]}var k=new WeakMap,S=function(e,r,n,t,u,i){void 0===i&&(i=!1);var a=k.get(e),o=a[0],c=a[1],s=o[r],f=c[r];if(f)for(var l=0;l<f.length;++l)f[l](n,t,u);return i&&s&&s[0]?s[0](2).then(function(){return e.get(r)}):e.get(r)},C=0,E=function(){return++C},T=function(e,r,o,c){return void 0===c&&(c=!0),n(void 0,void 0,void 0,function(){var n,s,f,l,d,v,g,h,p,b,y;return t(this,function(t){switch(t.label){case 0:if(n=V(r),s=n[0],f=n[2],!s)return[2];if(l=k.get(e),d=l[2],v=l[3],i(o))return[2,S(e,s,e.get(s),e.get(f),u,c)];if(p=d[s]=E(),v[s]=0,a(o))try{o=o(e.get(s))}catch(e){o=u,h=e}if(!o||!a(o.then))return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,o];case 2:return g=t.sent(),[3,4];case 3:return b=t.sent(),h=b,[3,4];case 4:if(p!==d[s]){if(h)throw h;return[2,g]}return[3,6];case 5:g=o,t.label=6;case 6:return i(g)||e.set(s,g),e.set(f,h),v[s]=E(),[4,S(e,s,g,h,u,c)];case 7:if(y=t.sent(),h)throw h;return[2,y]}})})};function I(e,r){for(var n in e)e[n][0]&&e[n][0](r)}function P(e,r){if(!k.has(e)){var n=c(h,r),t={},i=T.bind(u,e);return k.set(e,[t,{},{},{},{},{},i]),p||(n.initFocus(I.bind(u,t,0)),n.initReconnect(I.bind(u,t,1))),[e,i]}}var q=P(new Map),L=q[0],M=q[1],W=c({onLoadingSlow:o,onSuccess:o,onError:o,onErrorRetry:function(e,r,n,t,u){if(g.isVisible()){var a=n.errorRetryCount,o=u.retryCount,c=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!i(a)&&o>a||setTimeout(t,c,u)}},revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:R?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:R?5e3:3e3,compare:r.dequal,isPaused:function(){return!1},cache:L,mutate:M,fallback:{}},g);function D(e,r){var n=c(e,r);if(!r)return n;var t=e.use,u=e.fallback,i=r.use,a=r.fallback;return t&&i&&(n.use=t.concat(i)),u&&a&&(n.fallback=c(u,a)),n}var F=e.createContext({});function $(e){return a(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}]}var j,A=function(e,r,n){var t=r[e]||(r[e]=[]);return t.push(n),function(){var e=t.indexOf(n);e>=0&&(t[e]=t[t.length-1],t.pop())}},_={dedupe:!0},z=Object.defineProperty(function(r){var n=r.children,t=r.value,i=D(e.useContext(F),t),a=t&&t.provider,o=e.useState(function(){return a?P(a(i.cache||L),t):u})[0];return o&&(i.cache=o[0],i.mutate=o[1]),e.createElement(F.Provider,{value:i},n)},"default",{value:W}),G=(j=function(r,a,o){var s=o.cache,f=o.compare,l=o.fallbackData,d=o.suspense,v=o.revalidateOnMount,g=o.refreshInterval,h=o.refreshWhenHidden,b=o.refreshWhenOffline,m=k.get(s),R=m[0],x=m[1],O=m[2],C=m[3],I=m[4],P=m[5],q=V(r),L=q[0],M=q[1],W=q[2],D=q[3],F=e.useRef(!1),$=e.useRef(!1),j=e.useRef(L),z=e.useRef(o),G=s.get(L),H=i(l)?o.fallback[L]:l,J=i(G)?H:G,N=s.get(W),B=function(){return i(v)?d?!F.current&&!i(J):i(J)||o.revalidateIfStale:v},K=!(!L||!a)&&(!!s.get(D)||!F.current&&B()),Q=function(r,n){var t=e.useState({})[1],u=e.useRef(r),i=e.useRef({data:!1,error:!1,isValidating:!1}),a=e.useCallback(function(e){var r=!1,a=u.current;for(var o in e){var c=o;a[c]!==e[c]&&(a[c]=e[c],i.current[c]&&(r=!0))}r&&!n.current&&t({})},[]);return w(function(){u.current=r}),[u,i.current,a]}({data:J,error:N,isValidating:K},$),U=Q[0],X=Q[1],Y=Q[2],Z=e.useCallback(function(e){return n(void 0,void 0,void 0,function(){var r,n,c,l,d,v,g,h,p;return t(this,function(t){switch(t.label){case 0:if(!L||!a||$.current||z.current.isPaused())return[2,!1];c=!0,l=e||{},d=!i(I[L])&&l.dedupe,v=function(){return!$.current&&L===j.current&&F.current},g=function(){delete I[L],delete P[L]},t.label=1;case 1:return t.trys.push([1,6,,7]),s.set(D,!0),Y({isValidating:!0}),d||S(s,L,U.current.data,U.current.error,!0),d?(n=P[L],[4,I[L]]):[3,3];case 2:return r=t.sent(),[3,5];case 3:return o.loadingTimeout&&!s.get(L)&&setTimeout(function(){c&&v()&&z.current.onLoadingSlow(L,o)},o.loadingTimeout),P[L]=n=E(),[4,I[L]=a.apply(a,M)];case 4:r=t.sent(),setTimeout(function(){P[L]===n&&g()},o.dedupingInterval),v()&&z.current.onSuccess(r,L,o),t.label=5;case 5:return P[L]!==n?[2,!1]:!i(O[L])&&(n<=O[L]||n<=C[L]||0===C[L])?(Y({isValidating:!1}),[2,!1]):(s.set(W,u),s.set(D,!1),h={isValidating:!1},i(U.current.error)||(h.error=u),f(U.current.data,r)||(h.data=r),f(s.get(L),r)||s.set(L,r),Y(h),d||S(s,L,r,h.error,!1),[3,7]);case 6:return p=t.sent(),g(),z.current.isPaused()?(Y({isValidating:!1}),[2,!1]):(s.set(W,p),U.current.error!==p&&(Y({isValidating:!1,error:p}),d||S(s,L,u,p,!1)),v()&&(z.current.onError(p,L,o),o.shouldRetryOnError&&z.current.onErrorRetry(p,L,o,Z,{retryCount:(l.retryCount||0)+1,dedupe:!0})),[3,7]);case 7:return c=!1,[2,!0]}})})},[L]),ee=e.useCallback(function(e,r){return T(s,j.current,e,r)},[]);if(w(function(){z.current=o}),w(function(){if(L){var e=F.current,r=Z.bind(u,_),n=function(){return z.current.isVisible()&&z.current.isOnline()},t=0,a=A(L,x,function(e,r,n){Y(c({error:r,isValidating:n},f(e,U.current.data)?null:{data:e}))}),o=A(L,R,function(e){if(0===e){var u=Date.now();z.current.revalidateOnFocus&&u>t&&n()&&(t=u+z.current.focusThrottleInterval,r())}else if(1===e)z.current.revalidateOnReconnect&&n()&&r();else if(2===e)return Z()});return $.current=!1,j.current=L,e&&Y({data:J,error:N,isValidating:K}),(e||B())&&(i(J)||p?r():y(r)),F.current=!0,function(){$.current=!0,a(),o()}}},[L,Z]),w(function(){var e;function r(){g&&-1!==e&&(e=setTimeout(n,g))}function n(){U.current.error||!h&&!o.isVisible()||!b&&!o.isOnline()?r():Z(_).then(function(){return r()})}return r(),function(){e&&(clearTimeout(e),e=-1)}},[g,h,b,Z]),e.useDebugValue(J),d&&i(J))throw i(N)?Z(_):N;return{mutate:ee,get data(){return X.data=!0,J},get error(){return X.error=!0,N},get isValidating(){return X.isValidating=!0,K}}},function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var t=$(r),u=t[0],i=t[1],a=t[2],o=c(W,e.useContext(F)),s=D(o,a),f=j,l=s.use;if(l)for(var d=l.length;d-- >0;)f=l[d](f);return f(u,i||s.fetcher,s)});exports.SWRConfig=z,exports.default=G,exports.mutate=M,exports.unstable_serialize=function(e){return V(e)[0]},exports.useSWRConfig=function(){return c(W,e.useContext(F))};
